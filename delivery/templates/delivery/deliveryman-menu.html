{% extends "layout.html" %}
{% load static %}


{% block body %}
<div class="container d-flex flex-column col-12 col-lg-8 col-xl-6">
    <div class="row d-flex justify-content-center text-light glass py-3 rounded-4">
        <div class="col-12 col-lg-6 col-xl-6">
            <ul class="list-group">
                <li class="list-group-item px-4 pt-3 bg-black border-0 rounded-top-3 mb-2">
                    <h3>Delivery in progress</h3>
                </li>
                <div class="p-3">
                    {% if order_in_progress == None %}
                        <p class="text-secondary">No orders in progress.</p>
                    {% else %}
                        <span class="d-flex justify-content-between">
                            <span>
                                <p class="m-0 fw-bold">Order <span name="order-id">{{ order_in_progress.id }}</span></p>
                                <p name="order-quant">{{ order_in_progress.quant }}&times; Itens</p>
                            </span>
                            <span><div class="border rounded-pill p-2 px-3 text-center" name="order-status">{{ order.status.description }}</div></span>
                        </span>
                    {% endif %}
                </div>
                <li class="list-group-item px-4 pt-3 bg-black border-0 rounded-top-3 mb-2 d-flex justify-content-between align-items-center">
                    <h3>Orders awaiting withdraw</h3>
                    <i class="bi bi-info-circle p-2 py-1"  data-bs-toggle="tooltip" data-bs-placement="left" data-bs-custom-class="bg-dark shadow" data-bs-title="Show order specifications" data-bs-delay='{"show":800}'></i>
                </li>
                <div class="p-3">
                    <div class="accordion accordion-flush" id="order-accordion">
                        {% for order in orders_awaiting %}
                            <div class="accordion-item d-flex full-glass border-0 align-items-center">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed btn-theme rounded-pill p-2" id="collapse-btn-{{ order.id }}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-{{ order.id }}" aria-expanded="false" aria-controls="collapse-{{ order.id }}"></button>
                                </h2>
                                <label for="collapse-btn-{{ order.id }}" class="fw-bold w-100 p-3">Order <span name="order-id">{{ order.id }}</span></label>
                            </div>
                            <div id="collapse-{{ order.id }}" class="accordion-collapse collapse" data-bs-parent="#order-accordion">
                                <div class="accordion-body">
                                    <p>{{ order.delivery_adress.city }}, {{ order.delivery_adress.state }}</p>
                                    <button class="btn btn-theme">
                                        Take order
                                    </button>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </ul>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="{% static 'delivery/deliverymanMenu.js' %}"></script>

{% endblock %}